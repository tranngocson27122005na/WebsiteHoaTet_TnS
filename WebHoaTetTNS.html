<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Shop Hoa Táº¿t Tráº§n Ngá»c SÆ¡n</title>
  <link rel="stylesheet" href="webHoaTet.css">
  <link href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@400;700&family=Dancing+Script:wght@700&display=swap" rel="stylesheet">
</head>
<body>
  <header>
    <!-- <img src="https://picsum.photos/120/120" alt="Logo Hoa" class="header-flower"> -->
    <h1>SHOP HOA Táº¾T Tráº§n Ngá»c SÆ¡n ğŸŒ¸-NGHá»† AN-ğŸŒ¸</h1>
    <nav>
      <a href="#products">Sáº£n pháº©m</a>
      <a href="#cart">Giá» hÃ ng</a>
      <a href="#order-form">Äáº·t hÃ ng</a>
    </nav>
    
  </header>

  <section id="banner">
    <!-- <img src="https://picsum.photos/1200/400?random=1" alt="Hoa Táº¿t Banner"> -->
  </section>

  <section id="products">
    <h2>ğŸŒº Sáº£n pháº©m ná»•i báº­t</h2>
    <div class="product" data-name="Hoa Ly" data-price="299000">
      <!-- <img src="https://picsum.photos/300/200?random=2" alt="Hoa Ly"> -->
      <h3>HOA LY</h3>
      <p>299,000â‚«</p>
      <button class="add-cart">ThÃªm vÃ o giá»</button>
    </div>
    <div class="product" data-name="Hoa Mai" data-price="699000">
      <!-- <img src="https://picsum.photos/300/200?random=3" alt="Hoa Mai"> -->
      <h3>HOA MAI</h3>
      <p>699,000â‚«</p>
      <button class="add-cart">ThÃªm vÃ o giá»</button>
    </div>
    <div class="product" data-name="Hoa ÄÃ o" data-price="699000">
      <!-- <img src="https://picsum.photos/300/200?random=4" alt="Hoa ÄÃ o"> -->
      <h3>HOA ÄÃ€O</h3>
      <p>699,000â‚«</p>
      <button class="add-cart">ThÃªm vÃ o giá»</button>
    </div>
  </section>

  <section id="cart">
    <h2>ğŸ›’ Giá» hÃ ng</h2>
    <ul id="cart-items"></ul>
    <p><strong>Tá»•ng cá»™ng:</strong> <span id="total">0â‚«</span></p>
  </section>

  <section id="order-form">
    <h2>ğŸ“¦ Äáº·t hÃ ng</h2>
    <form id="form-order">
      <input type="text" id="name" placeholder="Há» vÃ  tÃªn" required>
      <input type="tel" id="phone" placeholder="Sá»‘ Ä‘iá»‡n thoáº¡i" required>
      <textarea id="address" placeholder="Äá»‹a chá»‰ giao hÃ ng" required></textarea>
      <button type="submit">Gá»­i Ä‘Æ¡n hÃ ng</button>
    </form>
    <p id="order-status"></p>
  </section>

  <footer>
  <div class="footer-container">
    <div class="footer-left">
      <h3>ğŸŒ¸ Shop Hoa Táº¿t Tráº§n Ngá»c SÆ¡n ğŸŒ¸</h3>
      <p>ğŸ‰ Mang Ä‘áº¿n khÃ´ng gian Táº¿t rá»±c rá»¡ táº¡i Nghá»‡ An</p>
    </div>
    <div class="footer-center">
      <h4>LiÃªn há»‡</h4>
      <p>ğŸ“± Zalo: <a href="https://zalo.me/0353265927" target="_blank">0353265927</a></p>
      <p>âœ‰ Email: <a href="mailto:tranngocson27122005na@gmail.com">tranngocson27122005na@gmail.com</a></p>
    </div>
    <div class="footer-right">
      <h4>Theo dÃµi chÃºng tÃ´i</h4>
      <p>
        <a href="#" class="social-btn">ğŸŒ Website</a>
        <a href="#" class="social-btn">ğŸ“¸ Instagram</a>
        <a href="#" class="social-btn">ğŸ‘ Facebook</a>
      </p>
    </div>
  </div>
  <div class="footer-bottom">
    <p>Â© 2025 Shop Hoa Táº¿t Tráº§n Ngá»c SÆ¡n | Thiáº¿t káº¿ bá»Ÿi TnS ğŸŒ¸</p>
  </div>
</footer>


  <!-- Chatbot -->
  <div id="chat-container">
    <div id="chat-header">TnS ChatBox ğŸŒ¸ - Há»— trá»£ mua HOA ğŸŒ¸</div>
    <div id="chat-messages"></div>
    <div id="chat-input-container">
      <input id="chat-input" type="text" placeholder="Nháº­p tin nháº¯n...">
      <button id="chat-send">Gá»­i</button>
    </div>
  </div>

  <script src="webHoaTet.js"></script>
  <script>
   /* ---------------- GIá» HÃ€NG ---------------- */
let cart = []; // máº£ng lÆ°u cÃ¡c sáº£n pháº©m trong giá»

// Cáº­p nháº­t hiá»ƒn thá»‹ giá» hÃ ng vÃ  tá»•ng tiá»n
function updateCart() {
    const cartEl = document.getElementById("cart-items");
    cartEl.innerHTML = "";

    let total = 0;

    cart.forEach((item, index) => {
        total += item.price;

        const li = document.createElement("li");
        li.innerHTML = `${item.name} - ${item.price.toLocaleString()}â‚« 
                        <button class="remove-btn" data-index="${index}">âŒ</button>`;
        cartEl.appendChild(li);
    });

    document.getElementById("total").innerText = total.toLocaleString() + "â‚«";

    // ThÃªm sá»± kiá»‡n xÃ³a sáº£n pháº©m
    document.querySelectorAll(".remove-btn").forEach(btn => {
        btn.addEventListener("click", () => {
            const idx = btn.dataset.index;
            cart.splice(idx, 1); // xÃ³a sáº£n pháº©m khá»i máº£ng
            updateCart(); // cáº­p nháº­t láº¡i giá»
        });
    });
}

// ThÃªm sáº£n pháº©m vÃ o giá»

document.querySelectorAll(".add-cart").forEach(btn => {
    btn.addEventListener("click", () => {
        const p = btn.closest(".product");
        const name = p.dataset.name;
        const price = Number(p.dataset.price);

        cart.push({ name, price }); // thÃªm vÃ o giá»
        const totalEl = document.getElementById("total");

        // hiá»‡u á»©ng nháº¥n tá»•ng tiá»n
        totalEl.style.transform = "scale(1.3)";
        setTimeout(() => totalEl.style.transform = "scale(1)", 300);

        updateCart(); // cáº­p nháº­t giá»

        // Gá»­i tin nháº¯n tá»± Ä‘á»™ng cho chatbot
        addBotAutoMessage(`Báº¡n vá»«a thÃªm <b>${name}</b> vÃ o giá». Tá»•ng hiá»‡n táº¡i: ${cart.reduce((a,b)=>a+b.price,0).toLocaleString()}â‚«`);
    });
});


/* ---------------- CHATBOT ---------------- */
const chatInput=document.getElementById("chat-input");
const chatMessages=document.getElementById("chat-messages");

async function sendUserMessage(msg){
    if(!msg) return;
    chatMessages.innerHTML+=`<div class="user-message">${msg}</div>`;
    chatInput.value=""; chatMessages.scrollTop=chatMessages.scrollHeight;
    await sendBotMessage(msg);
}

async function sendBotMessage(message){
    const botLoading=document.createElement("div"); botLoading.className="bot-message"; 
    botLoading.innerHTML='<span class="typing-dot">â€¢</span><span class="typing-dot">â€¢</span><span class="typing-dot">â€¢</span> Äang tráº£ lá»i...';
    chatMessages.appendChild(botLoading); chatMessages.scrollTop=chatMessages.scrollHeight;
    try{
        // MÃ´ phá»ng pháº£n há»“i chuyÃªn nghiá»‡p (demo), cÃ³ thá»ƒ thay báº±ng OpenAI API
        await new Promise(r=>setTimeout(r,1000));
        let botReply="";
        if(message.toLowerCase().includes("hoa ly")) botReply="ğŸŒ¸ Hoa Ly 299,000â‚«/bÃ³. Báº¡n muá»‘n thÃªm vÃ o giá» khÃ´ngğŸŒ¸?";
        else if(message.toLowerCase().includes("hoa Ä‘Ã o")) botReply="ğŸŒ¸ Hoa ÄÃ o 699,000â‚«/bÃ³. Báº¡n muá»‘n thÃªm vÃ o giá» khÃ´ngğŸŒ¸?";
        else if(message.toLowerCase().includes("hoa mai")) botReply="ğŸŒ¸ Hoa Mai 699,000â‚«/bÃ³. Báº¡n muá»‘n thÃªm vÃ o giá» khÃ´ngğŸŒ¸?";
        else if(message.toLowerCase().includes("Ä‘Æ¡n hÃ ng")) botReply=`âœ… ÄÆ¡n hÃ ng hiá»‡n táº¡i:\n${cart.map(i=>i.name+' - '+i.price.toLocaleString()+'â‚«').join('\n')}\nTá»•ng: ${total.toLocaleString()}â‚«`;
        else botReply="Xin chÃ o! Báº¡n muá»‘n xem hoa nÃ o hÃ´m nayğŸŒ¸? Báº¡n cÃ³ thá»ƒ nháº¥n vÃ o gá»£i Ã½ bÃªn dÆ°á»›i.ğŸŒ¸";

        botLoading.remove();
        const botDiv=document.createElement("div"); botDiv.className="bot-message"; botDiv.innerHTML=botReply;
        chatMessages.appendChild(botDiv); chatMessages.scrollTop=chatMessages.scrollHeight;

        // ThÃªm button gá»£i Ã½ sáº£n pháº©m
        if(botReply.includes("Báº¡n cÃ³ thá»ƒ nháº¥n")) {
            ["Hoa Ly","Hoa ÄÃ o","Hoa Mai"].forEach(p=>{
                const btn=document.createElement("button"); btn.className="chat-btn"; btn.textContent=p;
                btn.onclick=()=> sendUserMessage(p);
                chatMessages.appendChild(btn);
            });
        }

    }catch(e){ console.error(e); botLoading.textContent="CÃ³ lá»—i xáº£y ra, vui lÃ²ng thá»­ láº¡i!"; }
}

document.getElementById("chat-send").addEventListener("click",()=>sendUserMessage(chatInput.value.trim()));
chatInput.addEventListener("keydown",e=>{if(e.key==="Enter"&&!e.shiftKey){e.preventDefault(); sendUserMessage(chatInput.value.trim());}});

/* ---------------- Tá»° Gá»¬I TIN NHáº®N MáºªU ---------------- */
const autoMessages=[
    "ChÃ o báº¡n! TÃ´i cÃ³ thá»ƒ giÃºp gÃ¬ hÃ´m nayğŸŒ¸?",
    "Báº¡n muá»‘n xem cÃ¡c loáº¡i hoa Táº¿t ná»•i báº­t khÃ´ngğŸŒ¸?",
    "Nháº¥n vÃ o hoa Ä‘á»ƒ thÃªm vÃ o giá» nhanh nhÃ©ğŸŒ¸!"
];
let autoIndex=0;
function addBotAutoMessage(msg){
    const botDiv=document.createElement("div"); botDiv.className="bot-message auto-message"; botDiv.innerHTML=msg;
    chatMessages.appendChild(botDiv); chatMessages.scrollTop=chatMessages.scrollHeight;
}
setInterval(()=>{addBotAutoMessage(autoMessages[autoIndex]); autoIndex=(autoIndex+1)%autoMessages.length;},15000);
  </script>
</body>
</html>
